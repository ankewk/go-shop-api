# ğŸ”§ Docker ç½‘ç»œé—®é¢˜è§£å†³æŒ‡å—

## âŒ é—®é¢˜æè¿°

å¦‚æœä½ é‡åˆ°ä»¥ä¸‹é”™è¯¯ï¼š
```bash
# ç½‘ç»œè¿æ¥é”™è¯¯
failed to set up container networking: driver failed programming external connectivity on endpoint gin-mysql-dev

# æˆ–è€…IPåœ°å€æ± å†²çªé”™è¯¯  
failed to create network go-shop-dev-network: Error response from daemon: invalid pool request: Pool overlaps with other one on this address space
```

è¿™äº›éƒ½æ˜¯Dockerç½‘ç»œé—®é¢˜ï¼Œé€šå¸¸ç”±ä»¥ä¸‹åŸå› å¯¼è‡´ï¼š
- ç«¯å£è¢«å…¶ä»–è¿›ç¨‹å ç”¨
- Dockerç½‘ç»œIPåœ°å€æ± å†²çª
- ç½‘ç»œé©±åŠ¨ç¨‹åºé—®é¢˜
- DockeræœåŠ¡çŠ¶æ€å¼‚å¸¸

## ğŸš€ å¿«é€Ÿè§£å†³æ–¹æ¡ˆ

### **æ–¹æ¡ˆä¸€ï¼šä¸€é”®å¿«é€Ÿä¿®å¤ï¼ˆæ¨èï¼‰**

```bash
# åŒå‡»è¿è¡Œç¯å¢ƒç®¡ç†å™¨
environment-launcher.cmd

# é€‰æ‹©é€‰é¡¹ Q: å¿«é€Ÿä¿®å¤Dockerç½‘ç»œé—®é¢˜
```

æˆ–è€…ç›´æ¥è¿è¡Œï¼š
```bash
quick-fix-docker.cmd
```

### **æ–¹æ¡ˆäºŒï¼šä½¿ç”¨å¤‡ç”¨ç«¯å£**

```bash
# åŒå‡»è¿è¡Œç¯å¢ƒç®¡ç†å™¨
environment-launcher.cmd

# é€‰æ‹©é€‰é¡¹ B: å¤‡ç”¨ç«¯å£å¯åŠ¨å¼€å‘ç¯å¢ƒ
```

æˆ–è€…ç›´æ¥è¿è¡Œï¼š
```bash
start-dev-backup.cmd
```

### **æ–¹æ¡ˆä¸‰ï¼šä¿®å¤IPåœ°å€æ± å†²çª**

```bash
# åŒå‡»è¿è¡Œç¯å¢ƒç®¡ç†å™¨
environment-launcher.cmd

# é€‰æ‹©é€‰é¡¹ I: ä¿®å¤Dockerç½‘ç»œIPå†²çªé—®é¢˜
```

æˆ–è€…ç›´æ¥è¿è¡Œï¼š
```bash
fix-network-ip-conflict.cmd
```

### **æ–¹æ¡ˆå››ï¼šæ— ç½‘ç»œæ¨¡å¼ï¼ˆç»ˆææ–¹æ¡ˆï¼‰**

```bash
# åŒå‡»è¿è¡Œç¯å¢ƒç®¡ç†å™¨
environment-launcher.cmd

# é€‰æ‹©é€‰é¡¹ N: æ— ç½‘ç»œæ¨¡å¼å¯åŠ¨å¼€å‘ç¯å¢ƒ
```

æˆ–è€…ç›´æ¥è¿è¡Œï¼š
```bash
start-dev-no-network.cmd
```

### **æ–¹æ¡ˆäº”ï¼šå®Œæ•´è¯Šæ–­**

```bash
# åŒå‡»è¿è¡Œç¯å¢ƒç®¡ç†å™¨
environment-launcher.cmd

# é€‰æ‹©é€‰é¡¹ F: å®Œæ•´è¯Šæ–­Dockerç½‘ç»œé—®é¢˜
```

æˆ–è€…ç›´æ¥è¿è¡Œï¼š
```bash
docker-network-fix-ultimate.cmd
```

## ğŸ¯ è§£å†³æ­¥éª¤è¯¦è§£

### æ­¥éª¤1ï¼šç¡®ä¿Docker Desktopè¿è¡Œ
- æ£€æŸ¥ç³»ç»Ÿæ‰˜ç›˜ï¼Œç¡®ä¿Dockerå›¾æ ‡ä¸ºç»¿è‰²
- å¦‚æœæœªå¯åŠ¨ï¼ŒåŒå‡»æ¡Œé¢ä¸Šçš„Docker Desktopå›¾æ ‡

### æ­¥éª¤2ï¼šè¿è¡Œå¿«é€Ÿä¿®å¤
```bash
quick-fix-docker.cmd
```

è¿™ä¸ªè„šæœ¬ä¼šï¼š
1. æ¸…ç†æ—§å®¹å™¨å’Œç½‘ç»œ
2. é‡å¯DockeræœåŠ¡
3. ä½¿ç”¨å¤‡ç”¨ç«¯å£å¯åŠ¨æœåŠ¡

### æ­¥éª¤3ï¼šéªŒè¯ä¿®å¤ç»“æœ
æˆåŠŸåä½ ä¼šçœ‹åˆ°ï¼š
```
âœ… MySQLå¯åŠ¨æˆåŠŸï¼ç«¯å£ï¼š3308
âœ… Rediså¯åŠ¨æˆåŠŸï¼ç«¯å£ï¼š6380
```

### æ­¥éª¤4ï¼šä½¿ç”¨å¤‡ç”¨é…ç½®
å¦‚æœå¿«é€Ÿä¿®å¤æˆåŠŸï¼Œè¯·ä½¿ç”¨å¤‡ç”¨é…ç½®å¯åŠ¨ä½ çš„åº”ç”¨ï¼š
```bash
start-dev-backup.cmd
```

## ğŸ“‹ ç«¯å£å¯¹æ¯”

| æœåŠ¡ | åŸç«¯å£ | å¤‡ç”¨ç«¯å£ | æ— ç½‘ç»œæ¨¡å¼ | çŠ¶æ€ |
|------|--------|----------|------------|------|
| MySQL | 3307 | 3308 | 3309 | âœ… å¯ç”¨ |
| Redis | 6379 | 6380 | 6381 | âœ… å¯ç”¨ |
| APIç½‘å…³ | 8080 | 8080 | - | âœ… ä¸å˜ |

## ğŸ¯ è§£å†³æ–¹æ¡ˆä¼˜å…ˆçº§

| ä¼˜å…ˆçº§ | æ–¹æ¡ˆ | é€‚ç”¨åœºæ™¯ | å¤æ‚åº¦ |
|--------|------|----------|--------|
| ğŸ¥‡ ç¬¬ä¸€é€‰æ‹© | å¿«é€Ÿä¿®å¤ | ä¸€èˆ¬ç½‘ç»œé—®é¢˜ | â­ ç®€å• |
| ğŸ¥ˆ ç¬¬äºŒé€‰æ‹© | IPå†²çªä¿®å¤ | IPåœ°å€æ± å†²çª | â­â­ ä¸­ç­‰ |
| ğŸ¥‰ ç¬¬ä¸‰é€‰æ‹© | å¤‡ç”¨ç«¯å£ | ç«¯å£å ç”¨ | â­â­ ä¸­ç­‰ |
| ğŸ†˜ æœ€åæ–¹æ¡ˆ | æ— ç½‘ç»œæ¨¡å¼ | æ‰€æœ‰ç½‘ç»œæ–¹æ¡ˆå¤±è´¥ | â­ ç®€å• |

## ğŸ”§ æ‰‹åŠ¨è§£å†³æ–¹æ¡ˆ

å¦‚æœè‡ªåŠ¨ä¿®å¤å¤±è´¥ï¼Œè¯·å°è¯•ï¼š

### 1. æ£€æŸ¥ç«¯å£å ç”¨
```cmd
netstat -ano | findstr :3307
netstat -ano | findstr :8080
netstat -ano | findstr :6379
```

### 2. åœæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹
```cmd
# æ‰¾åˆ°å ç”¨ç«¯å£çš„è¿›ç¨‹ID
tasklist /FI "PID eq [è¿›ç¨‹ID]"

# ç»“æŸè¿›ç¨‹
taskkill /F /PID [è¿›ç¨‹ID]
```

### 3. é‡å¯Docker Desktop
- å³é”®ç‚¹å‡»æ‰˜ç›˜ä¸­çš„Dockerå›¾æ ‡
- é€‰æ‹©"Restart Docker Desktop"

### 4. æ¸…ç†Dockerèµ„æº
```cmd
docker stop $(docker ps -aq)
docker rm $(docker ps -aq)
docker network prune -f
docker system prune -f
```

### 5. é‡ç½®Dockerç½‘ç»œ
```cmd
docker network create go-shop-dev-network
```

## ğŸ›¡ï¸ é¢„é˜²æªæ–½

### 1. ç¡®ä¿Docker Desktopè‡ªåŠ¨å¯åŠ¨
- Docker Desktop è®¾ç½® â†’ General â†’ Start Docker Desktop when you login

### 2. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
- ç¡®ä¿Windowsé˜²ç«å¢™å…è®¸Docker Desktop
- æ·»åŠ Dockeråˆ°æ€æ¯’è½¯ä»¶ç™½åå•

### 3. ä½¿ç”¨WSL2åç«¯
- Docker Desktop è®¾ç½® â†’ General â†’ Use WSL 2 based engine

### 4. å®šæœŸæ¸…ç†Dockerèµ„æº
```cmd
# æ¯å‘¨è¿è¡Œä¸€æ¬¡
docker system prune -f
docker network prune -f
```

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼š

1. **æŸ¥çœ‹è¯Šæ–­æŠ¥å‘Š**ï¼šè¿è¡Œå®Œæ•´è¯Šæ–­åä¼šç”Ÿæˆ`docker-diagnosis.txt`
2. **æ£€æŸ¥Dockerç‰ˆæœ¬**ï¼šç¡®ä¿ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„Docker Desktop
3. **é‡å¯è®¡ç®—æœº**ï¼šæœ‰æ—¶å€™é‡å¯å¯ä»¥è§£å†³ç½‘ç»œé©±åŠ¨é—®é¢˜
4. **é‡æ–°å®‰è£…Docker**ï¼šæœ€åçš„è§£å†³æ–¹æ¡ˆ

## âœ… éªŒè¯è§£å†³æ–¹æ¡ˆ

æˆåŠŸè§£å†³åï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š

1. **æŸ¥çœ‹è¿è¡Œçš„å®¹å™¨**ï¼š
   ```cmd
   docker ps
   ```

2. **æµ‹è¯•æ•°æ®åº“è¿æ¥**ï¼š
   ```cmd
   docker exec -it gin-mysql-dev-backup mysql -u gin_dev_user -p
   ```

3. **è®¿é—®å¾®æœåŠ¡**ï¼š
   - ç”¨æˆ·æœåŠ¡ï¼šhttp://localhost:8085/health
   - äº§å“æœåŠ¡ï¼šhttp://localhost:8082/health
   - è´­ç‰©è½¦æœåŠ¡ï¼šhttp://localhost:8083/health
   - è®¢å•æœåŠ¡ï¼šhttp://localhost:8084/health

---

**ğŸ‰ ç°åœ¨ä½ çš„å¼€å‘ç¯å¢ƒåº”è¯¥å¯ä»¥æ­£å¸¸è¿è¡Œäº†ï¼** 